\documentclass[12pt]{scrartcl}

\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\usepackage[backend=biber]{biblatex}
\addbibresource{/home/frank/docs/reference/literature.bib}
\AtEveryBibitem{\clearfield{url}}

\usepackage{zarithm}
\usepackage{zed-csp} % must be included after zarithm
\usepackage[mark]{gitinfo2}
\usepackage[outerbars]{changebar}
\newcommand{\remark}[1]{ \vspace{1em}\textbf{\underline{#1}}\vspace{1em} }
%\newcommand{\comment}[1]{ \textbf{\underline{#1}} }

\begin{document}

%opening
\title{Arithmetic Definitions in  Z to be used with Fuzz}

\author{Frank Dordowsky}

% make the title area
\maketitle

\begin{abstract}
The intention of this \LaTeX file is to extend the mathematical
tool-kit of the Z reference manual to include rational and real
numbers. 
\end{abstract}

%\tableofcontents
%\newpage

\section{Introduction}
\label{sec:intro}
Rational and real numbers are often used in the specification of
embedded systems to represent environmental variables such as
distances, termperatures, voltage levels etc. The mathematical toolkit
of the Z reference manual (ZRM) does not contain rational and real
numbers, whereas the number toolkit of the ISO Z standard
does. However, moving to standard (ISO) Z is not always the favourite
option, especially if a large amount of Z Specification in ZRM style
is available. Moreover, most Z textbooks have been written prior to
ISO Z. For those who wish to stick with ZRM, this set of two files
(\texttt{zarithm.sty} and \texttt{zarithm.tex}, this file) are
intended to provide a solution.

The file \texttt{zarithm.sty} is only used for typesetting, whereas
\texttt{zarithm.tex} includes the Z definitions of the types for
rational and real numbers, their basic operations and numerical
comparisons The Z definitions are sufficient for type setting, not for
automated proof. If the user intends to use autoated proof, there is
probably no way to transit to standard Z.

The ZRM comes along with the tool \texttt{fuzz}, a typechecker. The
approach described here makes use of the fact that fuzz accepts more
than one \LaTeX file and remembers the Z definitions or the
``earlier'' files.

\section{Arithmos $\arithmos$}
\label{sec:arithmos}

$\arithmos$, which can be pronounced “arithmos”, is the encompassing
set of numbers whose whole extent is deliberately left
unspecified. This definition has been adopted from
\cite{Valentine2012}.

\begin{zed}
  [\arithmos] 
\end{zed}

$\arithmos$ is encoded (in \LaTeX) by "\texttt{\textbackslash arithmos}".

$\arithmos$ is a field with respect to two operations $\aplus$ and
$\amult$, and neutral elements $\azero$ and $\aone$. Note that these
are not identical to the elements $0$ and $1$ defined in $\num$.

The addition is encoded by "\texttt{\textbackslash{}aplus}". There is
a unary operator $\aneg$ to negate any number, encoded as
"\texttt{\textbackslash{}aneg}"
%%inop \aplus 3
%%inop \aminus 3
\begin{axdef}
  \_ \aplus \_ : \arithmos \cross \arithmos \fun \arithmos\\
  \_ \aminus \_ : \arithmos \cross \arithmos \fun \arithmos\\
  \aneg : \arithmos \fun \arithmos\\
  \azero : \arithmos\\
  \aone : \arithmos\\
  \atwo : \arithmos\\
  \aten : \arithmos\\
  \where
  \forall x : \arithmos @ x \aplus \azero = \azero \aplus x = x \\
  \forall x : \arithmos @ x \aplus (\aneg x) = \azero \\
  \forall x : \arithmos @ \aneg (\aneg x) = x \\
  \forall x,y: \arithmos @ x \aplus y = y \aplus x \\
  \forall x,y,z: \arithmos @ ( x \aplus y ) \aplus z = x \aplus (y
  \aplus z) \\
  \forall x,y : \arithmos @ x \aminus y = x \aplus (\aneg y)\\
\end{axdef}

\begin{zed}
  \arithmos_1 == \arithmos \setminus \{ \azero \}
\end{zed}

%%inop \amult 4
%%inop \adiv 4
%%postop \ainv
\begin{axdef}
  \_ \amult \_ : \arithmos \cross \arithmos \fun \arithmos\\
  \_ \adiv \_ : \arithmos \cross \arithmos_1 \fun \arithmos\\
  \_ \ainv : \arithmos_1 \fun \arithmos_1\\
  \where
  \forall x : \arithmos @ x \amult \aone = \aone \amult x = x \\
  \forall x : \arithmos_1 @ x \amult (x \ainv) = \aone \\
  \forall x : \arithmos_1 @ (x \ainv)\ainv = x \\
  \forall x,y: \arithmos @ x \amult y = y \amult x \\
  \forall x,y,z: \arithmos @ ( x \amult y ) \amult z = x \amult (y
  \amult z) \\
  \forall x: \arithmos; y : \arithmos_1 @ x \adiv y = x \amult (y
  \ainv)\\
  \forall x: \arithmos @ x \amult \azero = \azero \amult x =
  \azero\\
  \forall x, y, z: \arithmos @ x \amult ( y \aplus z ) = x \amult y
  \aplus x \amult z \\
\end{axdef}

\section{Real Numbers $\real$}
\label{sec:real-numbers}

\begin{axdef}
  \real : \power \arithmos\\
  \where
  \azero \in \real\\
  \aone \in \real\\
  \atwo \in \real\\
  \aten \in \real\\
  \ran ( (\real \cross \real) \dres (\_ \aplus \_) ) \subset \real\\
  \ran ( (\real \cross \real) \dres (\_ \amult \_) ) \subset \real\\
  \ran (\real \dres (\aneg ))  \subset \real\\
  \ran (\real \dres (\_ \ainv ))  \subset \real\\
\end{axdef}

%%inrel \alt
\begin{axdef}
  \_ \alt \_ : \real \rel \real\\
  \where
  \forall x : \real @ \lnot x \alt x\\
  \forall x, y: \real @ x \alt y \lor x = y \lor y \alt x\\
  \forall x, y, z: \real | x \alt y \land y \alt z @ x \alt z \\
  \azero \alt \aone\\
\end{axdef}

%%inrel \aleq
%%inrel \agt
%%inrel \ageq
\begin{zed}
  (\_ \aleq \_) == (\_ \alt \_ ) \cup \id \real \\
  (\_ \agt \_) == (\_ \alt \_ ) \inv \\
  (\_ \ageq \_) == (\_ \agt \_ ) \cup \id \real \\
\end{zed}

\begin{zed}
  \realplus == \{~r :\real | r \agt \azero~\}\\
  \realminus == \real \setminus ( \realplus \cup \{~\azero~\})
\end{zed}

\section{Rational Numbers $\rat$}
\label{sec:rational-numbers}

\begin{axdef}
  \rat : \power \real
  \where
  \azero \in \rat\\
  \aone \in \rat\\
  \atwo \in \rat\\
  \aten \in \rat\\
  \ran ( (\rat \cross \rat) \dres (\_ \aplus \_) ) \subset \rat\\
  \ran ( (\rat \cross \rat) \dres (\_ \amult \_) ) \subset \rat\\
  \ran (\rat \dres (\aneg ))  \subset \rat\\
  \ran (\rat \dres (\_ \ainv ))  \subset \rat\\
\end{axdef}

\begin{zed}
  \ratplus == \{~q :\rat | q \agt \azero~\}\\
  \ratminus == \rat \setminus ( \ratplus \cup \{~\azero~\})
\end{zed}

\section{Integers and Rational Numbers}
\label{sec:integers-and-rationals}
Unfortunately it is not possible to include the integer numbers into
$\arithmos$, one can only embed them:

\begin{axdef}
  numembd : \num \inj \rat \\
  \where
  numembd~0 = \azero \\
  \forall n : \nat @ numembd (succ~n) = (numembd~n) \aplus \aone \\
  \forall z : \num | z < 0 @ numembd~z = \aneg(numembd(-z)) \\
\end{axdef}

The following laws can be easily derived from the definition:
\begin{zed}
  numembd~1 = \aone \\
  numembd~2 = \atwo \\
  numembd~10 = \aten \\
  \forall i, j : \num @ numembd (i+j) = numembd~i \aplus numembd~j \\
  \forall i, j : \num @ numembd (i-j) = numembd~i \aminus numembd~j \\
  \forall i, j : \num @ numembd (i*j) = numembd~i \amult numembd~j \\
  \forall i, j : \num | i < j @ numembd~i \alt numembd~j \\
\end{zed}

Mixing integers with real and rational numbers in arithmetic
operations would require to use the embedding above which would look
clumsy. Therefore, shortcuts for mixed operations are introduced.

%%inop \azplus 3
%%inop \aplusz 3
%%inop \azminus 3
%%inop \aminusz 3
%%inop \azmult 4
%%inop \amultz 4
%%inop \azdiv 4
%%inop \adivz 4
\begin{axdef}
  \_ \azplus \_ : \num \cross \arithmos \fun \arithmos\\
  \_ \aplusz \_ : \arithmos \cross \num \fun \arithmos\\
  \_ \azmult \_ : \num \cross \arithmos \fun \arithmos\\
  \_ \amultz \_ : \arithmos \cross \num \fun \arithmos\\
  \_ \azminus \_ : \num \cross \arithmos \fun \arithmos\\
  \_ \aminusz \_ : \arithmos \cross \num \fun \arithmos\\
  \_ \azdiv \_ : \num \cross \arithmos_1 \fun \arithmos\\
  \_ \adivz \_ : \arithmos \cross (\num \setminus \{~0~\}) \fun \arithmos\\
  \where
  \forall z: \num; x : \arithmos @ z \azplus x = numembd(z) \aplus x =
  x \aplus numembd(z) = x \aplusz z\\
  \forall z: \num; x : \arithmos @ z \azmult x = numembd(z) \amult x =
  x \amult numembd(z) = x \amultz z\\
  \forall z: \num; x : \arithmos @ z \azminus x = numembd(z) \aminus x =
  x \aminus numembd(z) = x \aminusz z\\
  \forall z: \num ; x :\arithmos_1 @ z \azdiv x = numembd(z) \adiv x\\
    \forall z: \num ; x :\arithmos | z \neq 0 @ x \adivz z = x \adiv numembd(z)\\
\end{axdef}

\section{Special Functions}
\label{sec:special-functions}

\begin{axdef}
  abs: \arithmos \pfun \realplus \cup \{~\azero~\}\\
  \where
  abs(\azero) = \azero\\
  abs(\aone) = \aone\\
  \forall x, y : \dom abs @ abs(x \amult y) = abs(x) \amult abs(y)\\
  \forall x, y : \dom abs @ abs(x \aplus y) \aleq abs(x) \aplus
  abs(y)\\
  \real \dres abs = \id \real \oplus (\lambda x: \realminus @ \aneg x)\\
\end{axdef}

% 
% bibliography
\printbibliography{}

%\todos

\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
